<ng-container *ngIf="loading">
  <mat-spinner></mat-spinner>
</ng-container>
<ng-container *ngIf="found">
<form [class]="'eventForm'" [formGroup]="eventForm" (ngSubmit)="onSubmit()">

<mat-form-field appearance="fill">
  <mat-label>Name:</mat-label>
  <input id="name" type="text" formControlName="name" matInput>
</mat-form-field>

  <mat-form-field appearance="fill">
    <mat-label>Date: </mat-label>
    <input matInput [matDatepicker]="picker" formControlName="date">
    <mat-datepicker-toggle matSuffix [for]="picker"></mat-datepicker-toggle>
    <mat-datepicker #picker></mat-datepicker>
  </mat-form-field>

<!--  <mat-form-field appearance="fill">-->
<!--    <mat-label>Coordinates:</mat-label>-->
<!--    <input id="coordinates" type="text" formControlName="coordinates" matInput>-->
<!--  </mat-form-field>-->
  <mat-checkbox class="example-margin"
                [checked]="!!coordinates"
                (click)="onNoClick($event)"
  >
  </mat-checkbox>
  <input #gpxInput hidden type="file" onclick="this.value=null" (change)="parseGPX($event)" accept=".gpx"/>
  <button mat-button type="button" (click)="gpxInput.click()">Upload coordinates via GPX</button>
  <div style="height: 300px; width: 300px"
       leaflet
       [leafletOptions]="options"
       [leafletLayers]="layers"
       [(leafletCenter)]="center"
       [leafletFitBounds]="fitToBounds"
  >
  </div>

  <mat-form-field appearance="fill">
    <mat-label>DescriptionId:</mat-label>
    <input id="descriptionId" type="text" formControlName="descriptionId" matInput>
  </mat-form-field>

  <mat-form-field appearance="fill">
    <mat-label>Description:</mat-label>
    <textarea
      cdkTextareaAutosize
      #autosize="cdkTextareaAutosize"
      cdkAutosizeMinRows="4"
      id="description" formControlName="description" matInput></textarea>
  </mat-form-field>

  <mat-form-field appearance="fill">
    <mat-label>Rating:</mat-label>
    <input id="rating" type="number" step="1" min="0" max="5"  formControlName="rating" matInput>
  </mat-form-field>

  <mat-form-field appearance="fill">
    <mat-label>Elevation:</mat-label>
    <input id="elevation" type="number" formControlName="elevation" matInput>
  </mat-form-field>

  <mat-form-field appearance="fill">
    <mat-label>Distance:</mat-label>
    <input id="distance" type="number" formControlName="distance" matInput>
  </mat-form-field>

  <mat-form-field appearance="fill">
    <mat-label>Trip:</mat-label>
    <input id="trip" type="text" formControlName="trip" matInput>
  </mat-form-field>

  <mat-label>Media:</mat-label>
  <button type="button" mat-raised-button (click)="openDialog()">Add media</button>
  <div cdkDropList cdkDropListOrientation="horizontal" class="example-list" (cdkDropListDropped)="drop($event)">
    <div class="example-box" *ngFor="let med of media; index as i" cdkDrag>
      <button mat-button color="warn" type="button" (click)="removeMedia(med)">x</button>
      <img src="{{med['path']}}" alt="{{med['mediaId']}}">
      <p>{{i}}: {{med['mediaId']}}</p>
    </div>
  </div>


  <button type="submit" mat-button [disabled]="!eventForm.valid">Submit</button>
</form>
</ng-container>
<ng-container *ngIf="!found && !loading">
  <span>404</span>
</ng-container>

